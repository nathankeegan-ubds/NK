{
  "$schema": "https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.30.23.60470",
      "templateHash": "12745433480120788997"
    }
  },
  "parameters": {
    "topLevelManagementGroupPrefix": {
      "type": "string",
      "defaultValue": "alz",
      "metadata": {
        "message": "The JSON version of this file is programatically generated from Bicep. PLEASE DO NOT UPDATE MANUALLY!!",
        "description": "Provide a prefix (unique at tenant-scope) for the Management Group hierarchy and other resources created as part of an Azure landing zone. DEFAULT VALUE = \"alz\""
      }
    },
    "location": {
      "type": "string",
      "defaultValue": "[deployment().location]",
      "metadata": {
        "description": "Optionally set the deployment location for policies with Deploy If Not Exists effect. DEFAULT VALUE = \"deployment().location\""
      }
    },
    "scope": {
      "type": "string",
      "defaultValue": "[tenantResourceId('Microsoft.Management/managementGroups', parameters('topLevelManagementGroupPrefix'))]",
      "metadata": {
        "description": "Optionally set the scope for custom Policy Definitions used in Policy Set Definitions (Initiatives). Must be one of '/', '/subscriptions/id' or '/providers/Microsoft.Management/managementGroups/id'. DEFAULT VALUE = '/providers/Microsoft.Management/managementGroups/${topLevelManagementGroupPrefix}'"
      }
    }
  },
  "variables": {
    "copy": [
      {
        "name": "processPolicyDefinitionsAll",
        "count": "[length(variables('loadPolicyDefinitions').All)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').All[copyIndex('processPolicyDefinitionsAll')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureCloud",
        "count": "[length(variables('loadPolicyDefinitions').AzureCloud)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureCloud[copyIndex('processPolicyDefinitionsAzureCloud')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureChinaCloud",
        "count": "[length(variables('loadPolicyDefinitions').AzureChinaCloud)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureChinaCloud[copyIndex('processPolicyDefinitionsAzureChinaCloud')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicyDefinitionsAzureUSGovernment",
        "count": "[length(variables('loadPolicyDefinitions').AzureUSGovernment)]",
        "input": "[replace(replace(variables('loadPolicyDefinitions').AzureUSGovernment[copyIndex('processPolicyDefinitionsAzureUSGovernment')], variables('templateVars').defaultDeploymentLocation, variables('deploymentLocation')), variables('templateVars').localizedDeploymentLocation, variables('deploymentLocation'))]"
      },
      {
        "name": "processPolicySetDefinitionsAll",
        "count": "[length(variables('loadPolicySetDefinitions').All)]",
        "input": "[replace(variables('loadPolicySetDefinitions').All[copyIndex('processPolicySetDefinitionsAll')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureCloud",
        "count": "[length(variables('loadPolicySetDefinitions').AzureCloud)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureCloud[copyIndex('processPolicySetDefinitionsAzureCloud')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureChinaCloud",
        "count": "[length(variables('loadPolicySetDefinitions').AzureChinaCloud)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureChinaCloud[copyIndex('processPolicySetDefinitionsAzureChinaCloud')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "processPolicySetDefinitionsAzureUSGovernment",
        "count": "[length(variables('loadPolicySetDefinitions').AzureUSGovernment)]",
        "input": "[replace(variables('loadPolicySetDefinitions').AzureUSGovernment[copyIndex('processPolicySetDefinitionsAzureUSGovernment')], variables('templateVars').scope, parameters('scope'))]"
      },
      {
        "name": "policyDefinitionsAll",
        "count": "[length(variables('processPolicyDefinitionsAll'))]",
        "input": "[json(variables('processPolicyDefinitionsAll')[copyIndex('policyDefinitionsAll')])]"
      },
      {
        "name": "policyDefinitionsAzureCloud",
        "count": "[length(variables('processPolicyDefinitionsAzureCloud'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureCloud')[copyIndex('policyDefinitionsAzureCloud')])]"
      },
      {
        "name": "policyDefinitionsAzureChinaCloud",
        "count": "[length(variables('processPolicyDefinitionsAzureChinaCloud'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureChinaCloud')[copyIndex('policyDefinitionsAzureChinaCloud')])]"
      },
      {
        "name": "policyDefinitionsAzureUSGovernment",
        "count": "[length(variables('processPolicyDefinitionsAzureUSGovernment'))]",
        "input": "[json(variables('processPolicyDefinitionsAzureUSGovernment')[copyIndex('policyDefinitionsAzureUSGovernment')])]"
      },
      {
        "name": "policySetDefinitionsAll",
        "count": "[length(variables('processPolicySetDefinitionsAll'))]",
        "input": "[json(variables('processPolicySetDefinitionsAll')[copyIndex('policySetDefinitionsAll')])]"
      },
      {
        "name": "policySetDefinitionsAzureCloud",
        "count": "[length(variables('processPolicySetDefinitionsAzureCloud'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureCloud')[copyIndex('policySetDefinitionsAzureCloud')])]"
      },
      {
        "name": "policySetDefinitionsAzureChinaCloud",
        "count": "[length(variables('processPolicySetDefinitionsAzureChinaCloud'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureChinaCloud')[copyIndex('policySetDefinitionsAzureChinaCloud')])]"
      },
      {
        "name": "policySetDefinitionsAzureUSGovernment",
        "count": "[length(variables('processPolicySetDefinitionsAzureUSGovernment'))]",
        "input": "[json(variables('processPolicySetDefinitionsAzureUSGovernment')[copyIndex('policySetDefinitionsAzureUSGovernment')])]"
      }
    ],
    "$fxv#0": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_CpuPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases CPU Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases app_cpu_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"app_cpu_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-app_cpu_percent-threshold-Override_'), field('tags._amba-app_cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-app_cpu_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases app_cpu_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"app_cpu_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"app_cpu_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-app_cpu_percent-threshold-Override_'), field('tags._amba-app_cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#1": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_MemoryPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Memory Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases app_memory_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"app_memory_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-app_memory_percent-threshold-Override_'), field('tags._amba-app_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-app_memory_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases app_memory_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"app_memory_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"app_memory_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-app_memory_percent-threshold-Override_'), field('tags._amba-app_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#10": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_DtuConsumptionPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases DTU Consumption Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases dwu_consumption_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"95\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"dwu_consumption_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-dwu_consumption_percent-threshold-Override_'), field('tags._amba-dwu_consumption_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-dwu_consumption_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases dwu_consumption_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"dwu_consumption_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"dwu_consumption_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-dwu_consumption_percent-threshold-Override_'), field('tags._amba-dwu_consumption_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#11": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_MemoryUsagePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Memory Usage Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases memory_usage_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"memory_usage_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-memory_usage_percent-threshold-Override_'), field('tags._amba-memory_usage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-memory_usage_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases memory_usage_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"memory_usage_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"memory_usage_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-memory_usage_percent-threshold-Override_'), field('tags._amba-memory_usage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#12": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_SessionsCount_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Sessions Count Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases sessions_count Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"0\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"0.5\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sessions_count\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"LessThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sessions_count-threshold-Override_'), field('tags._amba-sessions_count-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sessions_count')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases sessions_count\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sessions_count\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"sessions_count\",\r\n                            \"operator\": \"LessThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sessions_count-threshold-Override_'), field('tags._amba-sessions_count-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#13": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_SqlInstanceCpuPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases SQL Instance CPU Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases sql_instance_cpu_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT15M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"70\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sql_instance_cpu_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sql_instance_cpu_percent-threshold-Override_'), field('tags._amba-sql_instance_cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sql_instance_cpu_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases sql_instance_cpu_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sql_instance_cpu_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"sql_instance_cpu_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sql_instance_cpu_percent-threshold-Override_'), field('tags._amba-sql_instance_cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#14": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_SqlInstanceMemoryPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases SQL Instance Memory Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases sql_instance_memory_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sql_instance_memory_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sql_instance_memory_percent-threshold-Override_'), field('tags._amba-sql_instance_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sql_instance_memory_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases sql_instance_memory_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sql_instance_memory_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"sql_instance_memory_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sql_instance_memory_percent-threshold-Override_'), field('tags._amba-sql_instance_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#15": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_Storage_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Storage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases storage Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"934584883610\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"storage\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-storage-threshold-Override_'), field('tags._amba-storage-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-storage')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases storage\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"storage\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"storage\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-storage-threshold-Override_'), field('tags._amba-storage-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#16": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_TempDbDataSize_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Temp DB Data Size Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases tempdb_data_size Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT15M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"tempdb_data_size\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-tempdb_data_size-threshold-Override_'), field('tags._amba-tempdb_data_size-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-tempdb_data_size')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases tempdb_data_size\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"tempdb_data_size\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"tempdb_data_size\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-tempdb_data_size-threshold-Override_'), field('tags._amba-tempdb_data_size-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#17": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_AllocatedDataStorage_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Allocated Data Storage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools allocated_data_storage Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"1\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"225000000000\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"allocated_data_storage\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThanOrEqual\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-allocated_data_storage-threshold-Override_'), field('tags._amba-allocated_data_storage-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-allocated_data_storage')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools allocated_data_storage\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"allocated_data_storage\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"allocated_data_storage\",\r\n                            \"operator\": \"GreaterThanOrEqual\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-allocated_data_storage-threshold-Override_'), field('tags._amba-allocated_data_storage-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#18": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_AllocatedDataStoragePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Allocated Data Storage Percentages Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools allocated_data_storage_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"allocated_data_storage_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-allocated_data_storage_percent-threshold-Override_'), field('tags._amba-allocated_data_storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-allocated_data_storage_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools allocated_data_storage_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"allocated_data_storage_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"allocated_data_storage_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-allocated_data_storage_percent-threshold-Override_'), field('tags._amba-allocated_data_storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#19": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_CpuPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools CPU Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools cpu_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"cpu_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-cpu_percent-threshold-Override_'), field('tags._amba-cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-cpu_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools cpu_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"cpu_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"cpu_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-cpu_percent-threshold-Override_'), field('tags._amba-cpu_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#2": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_BlockedByFirewall_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Blockey by Firewall Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases blocked_by_firewall Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"5\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"blocked_by_firewall\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Total\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-blocked_by_firewall-threshold-Override_'), field('tags._amba-blocked_by_firewall-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-blocked_by_firewall')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases blocked_by_firewall\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"blocked_by_firewall\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"blocked_by_firewall\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Total\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-blocked_by_firewall-threshold-Override_'), field('tags._amba-blocked_by_firewall-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#20": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_DtuConsumptionPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools DTU Consumption Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools dtu_consumption_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"dtu_consumption_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-dtu_consumption_percent-threshold-Override_'), field('tags._amba-dtu_consumption_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-dtu_consumption_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools dtu_consumption_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"dtu_consumption_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"dtu_consumption_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-dtu_consumption_percent-threshold-Override_'), field('tags._amba-dtu_consumption_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#21": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_eDtuUsed_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools eDTU Used Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools eDTU_used Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"eDTU_used\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-eDTU_used-threshold-Override_'), field('tags._amba-eDTU_used-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-eDTU_used')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools eDTU_used\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"eDTU_used\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"eDTU_used\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-eDTU_used-threshold-Override_'), field('tags._amba-eDTU_used-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#22": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_LogWritePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Log Write Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools log_write_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"log_write_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-log_write_percent-threshold-Override_'), field('tags._amba-log_write_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-log_write_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools log_write_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"log_write_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"log_write_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-log_write_percent-threshold-Override_'), field('tags._amba-log_write_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#23": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_PhysicalDataReadPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Physical Data Read Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools physical_data_read_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"physical_data_read_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-physical_data_read_percent-threshold-Override_'), field('tags._amba-physical_data_read_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-physical_data_read_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools physical_data_read_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"physical_data_read_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"physical_data_read_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-physical_data_read_percent-threshold-Override_'), field('tags._amba-physical_data_read_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#24": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_SessionsPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Sessions Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools sessions_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sessions_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sessions_percent-threshold-Override_'), field('tags._amba-sessions_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sessions_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools sessions_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sessions_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"sessions_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sessions_percent-threshold-Override_'), field('tags._amba-sessions_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#25": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_SqlServerProcessCorePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools SQL Server Process Core Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools sqlserver_process_core_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"95\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sqlserver_process_core_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sqlserver_process_core_percent-threshold-Override_'), field('tags._amba-sqlserver_process_core_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sqlserver_process_core_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools sqlserver_process_core_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sqlserver_process_core_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"sqlserver_process_core_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sqlserver_process_core_percent-threshold-Override_'), field('tags._amba-sqlserver_process_core_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#26": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_SqlServerProcessMemPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools SQL Server Process Memory Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools sqlserver_process_memory_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"sqlserver_process_memory_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Maximum\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-sqlserver_process_memory_percent-threshold-Override_'), field('tags._amba-sqlserver_process_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-sqlserver_process_memory_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools sqlserver_process_memory_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"sqlserver_process_memory_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"sqlserver_process_memory_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Maximum\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-sqlserver_process_memory_percent-threshold-Override_'), field('tags._amba-sqlserver_process_memory_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#27": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_StoragePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Storage Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools storage_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"storage_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-storage_percent-threshold-Override_'), field('tags._amba-storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-storage_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools storage_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"storage_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"storage_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-storage_percent-threshold-Override_'), field('tags._amba-storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#28": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_TempDbLogUsedPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Temp DB Log Used Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools tempdb_log_used_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"tempdb_log_used_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-tempdb_log_used_percent-threshold-Override_'), field('tags._amba-tempdb_log_used_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-tempdb_log_used_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools tempdb_log_used_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"tempdb_log_used_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"tempdb_log_used_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-tempdb_log_used_percent-threshold-Override_'), field('tags._amba-tempdb_log_used_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#29": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_WorkersPercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools Workers Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools workers_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"90\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"workers_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-workers_percent-threshold-Override_'), field('tags._amba-workers_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-workers_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools workers_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"workers_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"workers_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-workers_percent-threshold-Override_'), field('tags._amba-workers_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#3": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_ConnectionFailed_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Connection Failed Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases connection_failed Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"5\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"connection_failed\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Total\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-connection_failed-threshold-Override_'), field('tags._amba-connection_failed-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-connection_failed')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases connection_failed\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"connection_failed\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"connection_failed\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Total\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-connection_failed-threshold-Override_'), field('tags._amba-connection_failed-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#30": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Elasticpools_XtpStoragePercent_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Elasticpools XTP Storagae Percentage Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers elasticpools xtp_storage_percent Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/elasticpools\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"xtp_storage_percent\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/elasticpools/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-xtp_storage_percent-threshold-Override_'), field('tags._amba-xtp_storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-xtp_storage_percent')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers elasticpools xtp_storage_percent\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"xtp_storage_percent\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/elasticpools\",\r\n                            \"metricName\": \"xtp_storage_percent\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-xtp_storage_percent-threshold-Override_'), field('tags._amba-xtp_storage_percent-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#31": {
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2021-06-01",
      "name": "Alerting-SQLServer",
      "properties": {
        "displayName": "Deploy Azure Monitor Baseline Alerts for SQL Server",
        "description": "This initiative deploys Azure Monitor Baseline Alerts to monitor SQL Server Databases and Elastic Pools.",
        "metadata": {
          "version": "1.0.0",
          "category": "Monitoring",
          "source": "https://github.com/Azure/azure-monitor-baseline-alerts/",
          "alzCloudEnvironments": [
            "AzureCloud"
          ],
          "_deployed_by_amba": true
        },
        "parameters": {
          "ALZMonitorDisableTagName": {
            "type": "String",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag name",
              "description": "Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": "MonitorDisable"
          },
          "ALZMonitorDisableTagValues": {
            "type": "Array",
            "metadata": {
              "displayName": "ALZ Monitoring disabled tag values(s)",
              "description": "Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled."
            },
            "defaultValue": [
              "true",
              "Test",
              "Dev",
              "Sandbox"
            ]
          },
          "SqlServersDatabasesCpuPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersDatabasesCpuPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesCpuPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesCpuPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesCpuPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesCpuPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersDatabasesCpuPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesMemoryPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesMemoryPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesMemoryPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesMemoryPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesMemoryPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesMemoryPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersDatabasesMemoryPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesBlockedByFirewallAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersDatabasesBlockedByFirewallWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesBlockedByFirewallFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesBlockedByFirewallMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesBlockedByFirewallAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesBlockedByFirewallThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "5"
          },
          "SqlServersDatabasesBlockedByFirewallPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesConnectionFailedAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesConnectionFailedWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesConnectionFailedFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesConnectionFailedMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionFailedAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionFailedThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "5"
          },
          "SqlServersDatabasesConnectionFailedPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesConnectionFailedUserErrorAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesConnectionFailedUserErrorWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesConnectionFailedUserErrorFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesConnectionFailedUserErrorMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionFailedUserErrorAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionFailedUserErrorThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "1"
          },
          "SqlServersDatabasesConnectionFailedUserErrorPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesConnectionSuccessfulAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "4"
          },
          "SqlServersDatabasesConnectionSuccessfulWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesConnectionSuccessfulFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesConnectionSuccessfulMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionSuccessfulAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesConnectionSuccessfulAlertSensitvity": {
            "type": "String",
            "metadata": {
              "displayName": "Alert Sensitivity",
              "description": "Alert Sensitivity for the alert"
            },
            "allowedValues": [
              "Low",
              "Medium",
              "High"
            ],
            "defaultValue": "Low"
          },
          "SqlServersDatabasesConnectionSuccessfulPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesCpuUsedAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesCpuUsedWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesCpuUsedFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesCpuUsedMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesCpuUsedAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesCpuUsedThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersDatabasesCpuUsedPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesDeadlockAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesDeadlockWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDeadlockFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesDeadlockMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDeadlockAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDeadlockThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "1"
          },
          "SqlServersDatabasesDeadlockPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesDtuLimitAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersDatabasesDtuLimitWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDtuLimitFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDtuLimitMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuLimitAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuLimitThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "100"
          },
          "SqlServersDatabasesDtuLimitPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesDtuUsedAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesDtuUsedWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDtuUsedFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDtuUsedMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuUsedAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuUsedThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersDatabasesDtuUsedPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesDtuConsumptionPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesDtuConsumptionPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesDtuConsumptionPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesDtuConsumptionPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuConsumptionPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesDtuConsumptionPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "95"
          },
          "SqlServersDatabasesDtuConsumptionPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesMemoryUsagePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersDatabasesMemoryUsagePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesMemoryUsagePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersDatabasesMemoryUsagePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesMemoryUsagePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesMemoryUsagePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersDatabasesMemoryUsagePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesSessionsCountAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "0"
          },
          "SqlServersDatabasesSessionsCountWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesSessionsCountFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesSessionsCountMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSessionsCountAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSessionsCountThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "0.5"
          },
          "SqlServersDatabasesSessionsCountPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT15M"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "70"
          },
          "SqlServersDatabasesSqlInstanceCpuPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersDatabasesSqlInstanceMemoryPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesStorageAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesStorageWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesStorageFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesStorageMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesStorageAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesStorageThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "934584883610"
          },
          "SqlServersDatabasesStoragePolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersDatabasesTempDbDataSizeAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersDatabasesTempDbDataSizeWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT15M"
          },
          "SqlServersDatabasesTempDbDataSizeFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersDatabasesTempDbDataSizeMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesTempDbDataSizeAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersDatabasesTempDbDataSizeThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersDatabasesTempDbDataSizePolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsAllocatedDataStorageAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "1"
          },
          "SqlServersElasticpoolsAllocatedDataStorageWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsAllocatedDataStorageFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsAllocatedDataStorageMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsAllocatedDataStorageAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsAllocatedDataStorageThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "225000000000"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsAllocatedDataStoragePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsCpuPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsCpuPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsCpuPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsCpuPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsCpuPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsCpuPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsCpuPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsDtuConsumptionPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolseDtuUsedAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolseDtuUsedWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolseDtuUsedFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolseDtuUsedMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolseDtuUsedAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolseDtuUsedThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersElasticpoolseDtuUsedPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsLogWritePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsLogWritePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsLogWritePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsLogWritePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsLogWritePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsLogWritePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsLogWritePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsPhysicalDataReadPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsSessionsPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsSessionsPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsSessionsPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsSessionsPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSessionsPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSessionsPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsSessionsPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "95"
          },
          "SqlServersElasticpoolsSqlServerProcessCorePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "2"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsSqlServerProcessMemPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsStoragePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsStoragePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsStoragePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsStoragePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsStoragePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsStoragePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsStoragePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersElasticpoolsTempDbLogUsedPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsWorkersPercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsWorkersPercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsWorkersPercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT1M"
          },
          "SqlServersElasticpoolsWorkersPercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsWorkersPercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsWorkersPercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "90"
          },
          "SqlServersElasticpoolsWorkersPercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          },
          "SqlServersElasticpoolsXtpStoragePercentAlertSeverity": {
            "type": "String",
            "metadata": {
              "displayName": "Severity",
              "description": "Severity of the Alert"
            },
            "allowedValues": [
              "0",
              "1",
              "2",
              "3",
              "4"
            ],
            "defaultValue": "3"
          },
          "SqlServersElasticpoolsXtpStoragePercentWindowSize": {
            "type": "String",
            "metadata": {
              "displayName": "Window Size",
              "description": "Window size for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H",
              "PT6H",
              "PT12H",
              "P1D"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsXtpStoragePercentFrequency": {
            "type": "String",
            "metadata": {
              "displayName": "Evaluation Frequency",
              "description": "Evaluation frequency for the alert"
            },
            "allowedValues": [
              "PT1M",
              "PT5M",
              "PT15M",
              "PT30M",
              "PT1H"
            ],
            "defaultValue": "PT5M"
          },
          "SqlServersElasticpoolsXtpStoragePercentMitigate": {
            "type": "String",
            "metadata": {
              "displayName": "Auto Mitigate",
              "description": "Auto Mitigate for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsXtpStoragePercentAlertState": {
            "type": "String",
            "metadata": {
              "displayName": "Alert State",
              "description": "Alert state for the alert"
            },
            "allowedValues": [
              "true",
              "false"
            ],
            "defaultValue": "true"
          },
          "SqlServersElasticpoolsXtpStoragePercentThreshold": {
            "type": "String",
            "metadata": {
              "displayName": "Threshold",
              "description": "Threshold for the alert"
            },
            "defaultValue": "80"
          },
          "SqlServersElasticpoolsXtpStoragePercentPolicyEffect": {
            "type": "String",
            "metadata": {
              "displayName": "Effect",
              "description": "Effect of the policy"
            },
            "allowedValues": [
              "deployIfNotExists",
              "disabled"
            ],
            "defaultValue": "deployIfNotExists"
          }
        },
        "policyDefinitions": [
          {
            "policyDefinitionReferenceId": "ALZ_SqlServersDatabasesCpuPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_CpuPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesCpuPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesMemoryPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_MemoryPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesMemoryPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesBlockedByFirewallAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_BlockedByFirewall_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesBlockedByFirewallPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesConnectionFailedAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_ConnectionFailed_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesConnectionFailedUserErrorAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_ConnectionFailedUserError_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesConnectionFailedUserErrorPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesConnectionSuccessfulAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_ConnectionSuccessful_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulAlertState')]"
              },
              "alertSensitivity": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulAlertSensitvity')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesConnectionSuccessfulPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesCpuUsedAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_CpuUsed_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesCpuUsedPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesDeadlockAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_Deadlock_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesDeadlockPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesDtuLimitAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_DtuLimit_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesDtuLimitPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesDtuUsedAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_DtuUsed_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesDtuUsedPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesDtuConsumptionPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_DtuConsumptionPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesDtuConsumptionPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesMemoryUsagePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_MemoryUsagePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesMemoryUsagePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesSessionsCountAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_SessionsCount_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesSessionsCountPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesSqlInstanceCpuPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_SqlInstanceCpuPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceCpuPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesSqlInstanceMemoryPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_SqlInstanceMemoryPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesSqlInstanceMemoryPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesStorageAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_Storage_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesStorageAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesStorageWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesStorageFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesStorageMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesStorageAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesStorageThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesStoragePolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersDatabasesTempDbDataSizeAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Databases_TempDbDataSize_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizeThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersDatabasesTempDbDataSizePolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsAllocatedDataStorageAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_AllocatedDataStorage_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStorageThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsAllocatedDataStoragePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_AllocatedDataStoragePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsAllocatedDataStoragePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsCpuPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_CpuPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsCpuPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsDtuConsumptionPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_DtuConsumptionPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsDtuConsumptionPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolseDtuUsedAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_eDtuUsed_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolseDtuUsedPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsLogWritePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_LogWritePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsLogWritePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsPhysicalDataReadPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_PhysicalDataReadPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsPhysicalDataReadPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsSessionsPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_SessionsPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsSessionsPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsSqlServerProcessCorePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_SqlServerProcessCorePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessCorePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsSqlServerProcessMemPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_SqlServerProcessMemPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsSqlServerProcessMemPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsStoragePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_StoragePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsStoragePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsTempDbLogUsedPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_TempDbLogUsedPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsTempDbLogUsedPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsWorkersPercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_WorkersPercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsWorkersPercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          },
          {
            "policyDefinitionReferenceId": "ALZ_DeploySqlServersElasticpoolsXtpStoragePercentAlert",
            "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/contoso/providers/Microsoft.Authorization/policyDefinitions/Deploy_SqlServers_Elasticpools_XtpStoragePercent_Alert",
            "parameters": {
              "severity": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentAlertSeverity')]"
              },
              "windowSize": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentWindowSize')]"
              },
              "evaluationFrequency": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentFrequency')]"
              },
              "autoMitigate": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentMitigate')]"
              },
              "enabled": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentAlertState')]"
              },
              "threshold": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentThreshold')]"
              },
              "effect": {
                "value": "[[[parameters('SqlServersElasticpoolsXtpStoragePercentPolicyEffect')]"
              },
              "MonitorDisableTagName": {
                "value": "[[[parameters('ALZMonitorDisableTagName')]"
              },
              "MonitorDisableTagValues": {
                "value": "[[[parameters('ALZMonitorDisableTagValues')]"
              }
            }
          }
        ],
        "policyType": "Custom",
        "policyDefinitionGroups": null
      }
    },
    "$fxv#4": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_ConnectionFailedUserError_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Connection Failed User Error Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases connection_failed_user_error Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"1\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"connection_failed_user_error\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Total\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-connection_failed_user_error-threshold-Override_'), field('tags._amba-connection_failed_user_error-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-connection_failed_user_error')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases connection_failed_user_error\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"connection_failed_user_error\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"connection_failed_user_error\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Total\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-connection_failed_user_error-threshold-Override_'), field('tags._amba-connection_failed_user_error-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#5": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_ConnectionSuccessful_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Connection Successful Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases connection_successful Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"4\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"alertSensitivity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert Sensitivity\",\r\n          \"description\": \"Alert Sensitivity for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"Low\",\r\n          \"Medium\",\r\n          \"High\"\r\n        ],\r\n        \"defaultValue\": \"Low\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"connection_successful\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Total\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.operator\",\r\n                \"equals\": \"LessThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.alertSensitivity\",\r\n                \"equals\": \"[[parameters('alertSensitivity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.minFailingPeriodsToAlert\",\r\n                \"equals\": 5\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-MultipleResourceMultipleMetricCriteria.allOf[*].DynamicThresholdCriterion.failingPeriods.numberOfEvaluationPeriods\",\r\n                \"equals\": 5\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"alertSensitivity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-connection_successful')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases connection_successful\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"connection_successful\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"connection_successful\",\r\n                            \"operator\": \"LessThan\",\r\n                            \"alertSensitivity\": \"[[parameters('alertSensitivity')]\",\r\n                            \"failingPeriods\": {\r\n                              \"minFailingPeriodsToAlert\": 5,\r\n                              \"numberOfEvaluationPeriods\": 5\r\n                            },\r\n                            \"timeAggregation\": \"Total\",\r\n                            \"criterionType\": \"DynamicThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"alertSensitivity\": {\r\n                          \"value\": \"[[parameters('alertSensitivity')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"alertSensitivity\": {\r\n                  \"value\": \"[[parameters('alertSensitivity')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#6": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_CpuUsed_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases CPU Used Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases cpu_used Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"cpu_used\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-cpu_used-threshold-Override_'), field('tags._amba-cpu_used-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-cpu_used')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases cpu_used\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"cpu_used\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"cpu_used\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-cpu_used-threshold-Override_'), field('tags._amba-cpu_used-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#7": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_Deadlock_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases Deadlock Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases deadlock Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT1M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"1\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"deadlock\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Total\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-deadlock-threshold-Override_'), field('tags._amba-deadlock-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-deadlock')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases deadlock\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"deadlock\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"deadlock\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Total\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-deadlock-threshold-Override_'), field('tags._amba-deadlock-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#8": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_DtuLimit_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases DTU Limit Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases dtu_limit Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"2\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"100\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"dtu_limit\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-dtu_limit-threshold-Override_'), field('tags._amba-dtu_limit-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-dtu_limit')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases dtu_limit\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"dtu_limit\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"dtu_limit\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-dtu_limit-threshold-Override_'), field('tags._amba-dtu_limit-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "$fxv#9": "{\r\n  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n  \"apiVersion\": \"2021-06-01\",\r\n  \"name\": \"Deploy_SqlServers_Databases_DtuUsed_Alert\",\r\n  \"properties\": {\r\n    \"policyType\": \"Custom\",\r\n    \"mode\": \"All\",\r\n    \"displayName\": \"Deploy Sql Servers Databases DTU Used Alert\",\r\n    \"description\": \"Policy to Audit/Deploy Sql servers databases dtu_used Alert\",\r\n    \"metadata\": {\r\n      \"version\": \"1.0.0-preview\",\r\n      \"category\": \"Sql\",\r\n      \"preview\": true,\r\n      \"source\": \"https://github.com/Azure/azure-monitor-baseline-alerts/\",\r\n      \"alzCloudEnvironments\": [\r\n        \"AzureCloud\"\r\n      ],\r\n      \"_deployed_by_amba\": \"True\"\r\n    },\r\n    \"parameters\": {\r\n      \"severity\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Severity\",\r\n          \"description\": \"Severity of the Alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\"\r\n        ],\r\n        \"defaultValue\": \"3\"\r\n      },\r\n      \"windowSize\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Window Size\",\r\n          \"description\": \"Window size for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\",\r\n          \"PT6H\",\r\n          \"PT12H\",\r\n          \"P1D\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"evaluationFrequency\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Evaluation Frequency\",\r\n          \"description\": \"Evaluation frequency for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"PT1M\",\r\n          \"PT5M\",\r\n          \"PT15M\",\r\n          \"PT30M\",\r\n          \"PT1H\"\r\n        ],\r\n        \"defaultValue\": \"PT5M\"\r\n      },\r\n      \"autoMitigate\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Auto Mitigate\",\r\n          \"description\": \"Auto Mitigate for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"enabled\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Alert State\",\r\n          \"description\": \"Alert state for the alert\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"true\",\r\n          \"false\"\r\n        ],\r\n        \"defaultValue\": \"true\"\r\n      },\r\n      \"threshold\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Threshold\",\r\n          \"description\": \"Threshold for the alert\"\r\n        },\r\n        \"defaultValue\": \"80\"\r\n      },\r\n      \"effect\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Effect\",\r\n          \"description\": \"Effect of the policy\"\r\n        },\r\n        \"allowedValues\": [\r\n          \"deployIfNotExists\",\r\n          \"disabled\"\r\n        ],\r\n        \"defaultValue\": \"deployIfNotExists\"\r\n      },\r\n      \"MonitorDisableTagName\": {\r\n        \"type\": \"String\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag name\",\r\n          \"description\": \"Tag name used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": \"MonitorDisable\"\r\n      },\r\n      \"MonitorDisableTagValues\": {\r\n        \"type\": \"Array\",\r\n        \"metadata\": {\r\n          \"displayName\": \"Monitoring disabled tag values(s)\",\r\n          \"description\": \"Tag value(s) used to disable monitoring at the resource level. Set to true if monitoring should be disabled.\"\r\n        },\r\n        \"defaultValue\": [\r\n          \"true\",\r\n          \"Test\",\r\n          \"Dev\",\r\n          \"Sandbox\"\r\n        ]\r\n      }\r\n    },\r\n    \"policyRule\": {\r\n      \"if\": {\r\n        \"allOf\": [\r\n          {\r\n            \"field\": \"type\",\r\n            \"equals\": \"Microsoft.Sql/servers/databases\"\r\n          },\r\n          {\r\n            \"field\": \"[[concat('tags[', parameters('MonitorDisableTagName'), ']')]\",\r\n            \"notIn\": \"[[parameters('MonitorDisableTagValues')]\"\r\n          }\r\n        ]\r\n      },\r\n      \"then\": {\r\n        \"effect\": \"[[parameters('effect')]\",\r\n        \"details\": {\r\n          \"roleDefinitionIds\": [\r\n            \"/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c\"\r\n          ],\r\n          \"type\": \"Microsoft.Insights/metricAlerts\",\r\n          \"existenceCondition\": {\r\n            \"allOf\": [\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricNamespace\",\r\n                \"equals\": \"Microsoft.Sql/servers/databases\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].metricName\",\r\n                \"equals\": \"dtu_used\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/scopes[*]\",\r\n                \"equals\": \"[[concat(subscription().id, '/resourceGroups/', resourceGroup().name, '/providers/Microsoft.Sql/servers/databases/', field('fullName'))]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/enabled\",\r\n                \"equals\": \"[[parameters('enabled')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/evaluationFrequency\",\r\n                \"equals\": \"[[parameters('evaluationFrequency')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/windowSize\",\r\n                \"equals\": \"[[parameters('windowSize')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricalerts/severity\",\r\n                \"equals\": \"[[parameters('severity')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/autoMitigate\",\r\n                \"equals\": \"[[parameters('autoMitigate')]\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft-Azure-Monitor-SingleResourceMultipleMetricCriteria.allOf[*].timeAggregation\",\r\n                \"equals\": \"Average\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.operator\",\r\n                \"equals\": \"GreaterThan\"\r\n              },\r\n              {\r\n                \"field\": \"Microsoft.Insights/metricAlerts/criteria.Microsoft.Azure.Monitor.MultipleResourceMultipleMetricCriteria.allOf[*].StaticThresholdCriterion.threshold\",\r\n                \"equals\": \"[[if(contains(field('tags'), '_amba-dtu_used-threshold-Override_'), field('tags._amba-dtu_used-threshold-Override_'), parameters('threshold'))]\"\r\n              }\r\n            ]\r\n          },\r\n          \"deployment\": {\r\n            \"properties\": {\r\n              \"mode\": \"incremental\",\r\n              \"template\": {\r\n                \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n                \"contentVersion\": \"1.0.0.0\",\r\n                \"parameters\": {\r\n                  \"resourceName\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceName\",\r\n                      \"description\": \"Name of the resource\"\r\n                    }\r\n                  },\r\n                  \"resourceId\": {\r\n                    \"type\": \"String\",\r\n                    \"metadata\": {\r\n                      \"displayName\": \"resourceId\",\r\n                      \"description\": \"Resource ID of the resource emitting the metric that will be used for the comparison\"\r\n                    }\r\n                  },\r\n                  \"severity\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"windowSize\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"evaluationFrequency\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"autoMitigate\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"enabled\": {\r\n                    \"type\": \"String\"\r\n                  },\r\n                  \"threshold\": {\r\n                    \"type\": \"String\"\r\n                  }\r\n                },\r\n                \"variables\": {},\r\n                \"resources\": [\r\n                  {\r\n                    \"type\": \"Microsoft.Insights/metricAlerts\",\r\n                    \"apiVersion\": \"2018-03-01\",\r\n                    \"name\": \"[[concat(parameters('resourceName'), '-dtu_used')]\",\r\n                    \"location\": \"global\",\r\n                    \"tags\": {\r\n                      \"_deployed_by_amba\": true\r\n                    },\r\n                    \"properties\": {\r\n                      \"description\": \"Metric Alert for Sql servers databases dtu_used\",\r\n                      \"severity\": \"[[parameters('severity')]\",\r\n                      \"enabled\": \"[[parameters('enabled')]\",\r\n                      \"scopes\": [\r\n                        \"[[parameters('resourceId')]\"\r\n                      ],\r\n                      \"evaluationFrequency\": \"[[parameters('evaluationFrequency')]\",\r\n                      \"windowSize\": \"[[parameters('windowSize')]\",\r\n                      \"criteria\": {\r\n                        \"allOf\": [\r\n                          {\r\n                            \"name\": \"dtu_used\",\r\n                            \"metricNamespace\": \"Microsoft.Sql/servers/databases\",\r\n                            \"metricName\": \"dtu_used\",\r\n                            \"operator\": \"GreaterThan\",\r\n                            \"threshold\": \"[[parameters('threshold')]\",\r\n                            \"timeAggregation\": \"Average\",\r\n                            \"criterionType\": \"StaticThresholdCriterion\"\r\n                          }\r\n                        ],\r\n                        \"odata.type\": \"Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria\"\r\n                      },\r\n                      \"autoMitigate\": \"[[parameters('autoMitigate')]\",\r\n                      \"parameters\": {\r\n                        \"severity\": {\r\n                          \"value\": \"[[parameters('severity')]\"\r\n                        },\r\n                        \"windowSize\": {\r\n                          \"value\": \"[[parameters('windowSize')]\"\r\n                        },\r\n                        \"evaluationFrequency\": {\r\n                          \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                        },\r\n                        \"autoMitigate\": {\r\n                          \"value\": \"[[parameters('autoMitigate')]\"\r\n                        },\r\n                        \"enabled\": {\r\n                          \"value\": \"[[parameters('enabled')]\"\r\n                        },\r\n                        \"threshold\": {\r\n                          \"value\": \"[[parameters('threshold')]\"\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              \"parameters\": {\r\n                \"resourceName\": {\r\n                  \"value\": \"[[field('name')]\"\r\n                },\r\n                \"resourceId\": {\r\n                  \"value\": \"[[field('id')]\"\r\n                },\r\n                \"severity\": {\r\n                  \"value\": \"[[parameters('severity')]\"\r\n                },\r\n                \"windowSize\": {\r\n                  \"value\": \"[[parameters('windowSize')]\"\r\n                },\r\n                \"evaluationFrequency\": {\r\n                  \"value\": \"[[parameters('evaluationFrequency')]\"\r\n                },\r\n                \"autoMitigate\": {\r\n                  \"value\": \"[[parameters('autoMitigate')]\"\r\n                },\r\n                \"enabled\": {\r\n                  \"value\": \"[[parameters('enabled')]\"\r\n                },\r\n                \"threshold\": {\r\n                  \"value\": \"[[if(contains(field('tags'), '_amba-dtu_used-threshold-Override_'), field('tags._amba-dtu_used-threshold-Override_'), parameters('threshold'))]\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n",
    "cloudEnv": "[environment().name]",
    "defaultDeploymentLocationByCloudType": {
      "AzureCloud": "northeurope",
      "AzureChinaCloud": "chinaeast2",
      "AzureUSGovernment": "usgovvirginia"
    },
    "templateVars": {
      "scope": "/providers/Microsoft.Management/managementGroups/contoso",
      "defaultDeploymentLocation": "\"location\": \"northeurope\"",
      "localizedDeploymentLocation": "[format('\"location\": \"{0}\"', variables('defaultDeploymentLocationByCloudType')[variables('cloudEnv')])]"
    },
    "targetDeploymentLocationByCloudType": {
      "AzureCloud": "[coalesce(parameters('location'), 'northeurope')]",
      "AzureChinaCloud": "[coalesce(parameters('location'), 'chinaeast2')]",
      "AzureUSGovernment": "[coalesce(parameters('location'), 'usgovvirginia')]"
    },
    "deploymentLocation": "[format('\"location\": \"{0}\"', variables('targetDeploymentLocationByCloudType')[variables('cloudEnv')])]",
    "loadPolicyDefinitions": {
      "All": [
        "[variables('$fxv#0')]",
        "[variables('$fxv#1')]",
        "[variables('$fxv#2')]",
        "[variables('$fxv#3')]",
        "[variables('$fxv#4')]",
        "[variables('$fxv#5')]",
        "[variables('$fxv#6')]",
        "[variables('$fxv#7')]",
        "[variables('$fxv#8')]",
        "[variables('$fxv#9')]",
        "[variables('$fxv#10')]",
        "[variables('$fxv#11')]",
        "[variables('$fxv#12')]",
        "[variables('$fxv#13')]",
        "[variables('$fxv#14')]",
        "[variables('$fxv#15')]",
        "[variables('$fxv#16')]",
        "[variables('$fxv#17')]",
        "[variables('$fxv#18')]",
        "[variables('$fxv#19')]",
        "[variables('$fxv#20')]",
        "[variables('$fxv#21')]",
        "[variables('$fxv#22')]",
        "[variables('$fxv#23')]",
        "[variables('$fxv#24')]",
        "[variables('$fxv#25')]",
        "[variables('$fxv#26')]",
        "[variables('$fxv#27')]",
        "[variables('$fxv#28')]",
        "[variables('$fxv#29')]",
        "[variables('$fxv#30')]"
      ],
      "AzureCloud": [],
      "AzureChinaCloud": [],
      "AzureUSGovernment": []
    },
    "loadPolicySetDefinitions": {
      "All": [
        "[string(variables('$fxv#31'))]"
      ],
      "AzureCloud": [],
      "AzureChinaCloud": [],
      "AzureUSGovernment": []
    },
    "policyDefinitionsByCloudType": {
      "All": "[variables('policyDefinitionsAll')]",
      "AzureCloud": "[variables('policyDefinitionsAzureCloud')]",
      "AzureChinaCloud": "[variables('policyDefinitionsAzureChinaCloud')]",
      "AzureUSGovernment": "[variables('policyDefinitionsAzureUSGovernment')]"
    },
    "policySetDefinitionsByCloudType": {
      "All": "[variables('policySetDefinitionsAll')]",
      "AzureCloud": "[variables('policySetDefinitionsAzureCloud')]",
      "AzureChinaCloud": "[variables('policySetDefinitionsAzureChinaCloud')]",
      "AzureUSGovernment": "[variables('policySetDefinitionsAzureUSGovernment')]"
    },
    "policyDefinitions": "[concat(variables('policyDefinitionsByCloudType').All, variables('policyDefinitionsByCloudType')[variables('cloudEnv')])]",
    "policySetDefinitions": "[concat(variables('policySetDefinitionsByCloudType').All, variables('policySetDefinitionsByCloudType')[variables('cloudEnv')])]"
  },
  "resources": [
    {
      "copy": {
        "name": "PolicyDefinitions",
        "count": "[length(variables('policyDefinitions'))]"
      },
      "type": "Microsoft.Authorization/policyDefinitions",
      "apiVersion": "2020-09-01",
      "name": "[variables('policyDefinitions')[copyIndex()].name]",
      "properties": {
        "description": "[variables('policyDefinitions')[copyIndex()].properties.description]",
        "displayName": "[variables('policyDefinitions')[copyIndex()].properties.displayName]",
        "metadata": "[variables('policyDefinitions')[copyIndex()].properties.metadata]",
        "mode": "[variables('policyDefinitions')[copyIndex()].properties.mode]",
        "parameters": "[variables('policyDefinitions')[copyIndex()].properties.parameters]",
        "policyType": "[variables('policyDefinitions')[copyIndex()].properties.policyType]",
        "policyRule": "[variables('policyDefinitions')[copyIndex()].properties.policyRule]"
      }
    },
    {
      "copy": {
        "name": "PolicySetDefinitions",
        "count": "[length(variables('policySetDefinitions'))]"
      },
      "type": "Microsoft.Authorization/policySetDefinitions",
      "apiVersion": "2020-09-01",
      "name": "[variables('policySetDefinitions')[copyIndex()].name]",
      "properties": {
        "description": "[variables('policySetDefinitions')[copyIndex()].properties.description]",
        "displayName": "[variables('policySetDefinitions')[copyIndex()].properties.displayName]",
        "metadata": "[variables('policySetDefinitions')[copyIndex()].properties.metadata]",
        "parameters": "[variables('policySetDefinitions')[copyIndex()].properties.parameters]",
        "policyType": "[variables('policySetDefinitions')[copyIndex()].properties.policyType]",
        "policyDefinitions": "[variables('policySetDefinitions')[copyIndex()].properties.policyDefinitions]",
        "policyDefinitionGroups": "[variables('policySetDefinitions')[copyIndex()].properties.policyDefinitionGroups]"
      },
      "dependsOn": [
        "PolicyDefinitions"
      ]
    }
  ],
  "outputs": {
    "policyDefinitionNames": {
      "type": "array",
      "copy": {
        "count": "[length(variables('policyDefinitions'))]",
        "input": "[variables('policyDefinitions')[copyIndex()].name]"
      }
    },
    "policySetDefinitionNames": {
      "type": "array",
      "copy": {
        "count": "[length(variables('policySetDefinitions'))]",
        "input": "[variables('policySetDefinitions')[copyIndex()].name]"
      }
    }
  }
}